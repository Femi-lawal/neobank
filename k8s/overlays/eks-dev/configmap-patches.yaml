# ConfigMap patches to set environment-specific values
# NOTE: Substitute ${RDS_ENDPOINT} and ${REDIS_ENDPOINT} before deployment
apiVersion: v1
kind: ConfigMap
metadata:
  name: neobank-config
  namespace: neobank
data:
  # Database Configuration (non-secret) - substitute RDS_ENDPOINT before deployment
  DB_HOST: "${RDS_ENDPOINT}"
  DB_PORT: "5432"
  DB_NAME: "newbank_core"
  DB_SSLMODE: "require"

  # Redis Configuration (non-secret) - substitute REDIS_ENDPOINT before deployment
  REDIS_ADDR: "${REDIS_ENDPOINT}"
  REDIS_DB: "0"
  REDIS_POOL_SIZE: "10"

  # Service URLs (internal cluster DNS)
  IDENTITY_SERVICE_URL: "http://identity-service.neobank.svc.cluster.local:8080"
  LEDGER_SERVICE_URL: "http://ledger-service.neobank.svc.cluster.local:8081"
  PAYMENT_SERVICE_URL: "http://payment-service.neobank.svc.cluster.local:8082"
  CARD_SERVICE_URL: "http://card-service.neobank.svc.cluster.local:8083"
  PRODUCT_SERVICE_URL: "http://product-service.neobank.svc.cluster.local:8084"

  # Environment
  ENVIRONMENT: "dev"
  LOG_LEVEL: "info"

  # Feature Flags
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "true"
  METRICS_PORT: "9090"
