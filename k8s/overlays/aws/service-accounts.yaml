# ============================================================================
# AWS-Enabled Kubernetes Manifests
# These manifests configure services to use AWS resources via IRSA
# ============================================================================
apiVersion: v1
kind: Namespace
metadata:
  name: neobank
  labels:
    app.kubernetes.io/name: neobank
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/enforce-version: latest
---
# Service Account for Identity Service
apiVersion: v1
kind: ServiceAccount
metadata:
  name: identity-service
  namespace: neobank
  annotations:
    # This annotation is populated by Terraform output
    eks.amazonaws.com/role-arn: ${IDENTITY_SERVICE_ROLE_ARN}
---
# Service Account for Ledger Service
apiVersion: v1
kind: ServiceAccount
metadata:
  name: ledger-service
  namespace: neobank
  annotations:
    eks.amazonaws.com/role-arn: ${LEDGER_SERVICE_ROLE_ARN}
---
# Service Account for Payment Service
apiVersion: v1
kind: ServiceAccount
metadata:
  name: payment-service
  namespace: neobank
  annotations:
    eks.amazonaws.com/role-arn: ${PAYMENT_SERVICE_ROLE_ARN}
---
# Service Account for Product Service
apiVersion: v1
kind: ServiceAccount
metadata:
  name: product-service
  namespace: neobank
  annotations:
    eks.amazonaws.com/role-arn: ${PRODUCT_SERVICE_ROLE_ARN}
---
# Service Account for Card Service
apiVersion: v1
kind: ServiceAccount
metadata:
  name: card-service
  namespace: neobank
  annotations:
    eks.amazonaws.com/role-arn: ${CARD_SERVICE_ROLE_ARN}
