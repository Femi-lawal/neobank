# Resource Quotas for NeoBank namespaces
# Enforces cost controls by limiting resource consumption
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: neobank-resource-quota
  namespace: neobank
  labels:
    finops.neobank.io/policy: resource-governance
spec:
  hard:
    # Compute resources
    requests.cpu: "10"
    requests.memory: 20Gi
    limits.cpu: "20"
    limits.memory: 40Gi

    # Storage resources
    requests.storage: 100Gi
    persistentvolumeclaims: "20"

    # Object counts
    pods: "100"
    services: "20"
    secrets: "50"
    configmaps: "50"
    replicationcontrollers: "20"

    # Service resources
    services.loadbalancers: "2"
    services.nodeports: "5"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: neobank-burst-quota
  namespace: neobank
  labels:
    finops.neobank.io/policy: burst-limit
spec:
  hard:
    # Burst limits (allow temporary scaling)
    count/deployments.apps: "30"
    count/replicasets.apps: "50"
    count/jobs.batch: "100"
  scopeSelector:
    matchExpressions:
      - operator: In
        scopeName: PriorityClass
        values: ["high-priority"]
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: finops-resource-quota
  namespace: finops
  labels:
    finops.neobank.io/policy: platform-tools
spec:
  hard:
    requests.cpu: "4"
    requests.memory: 8Gi
    limits.cpu: "8"
    limits.memory: 16Gi
    pods: "20"
---
# Development namespace quota (more restrictive)
apiVersion: v1
kind: ResourceQuota
metadata:
  name: neobank-dev-quota
  namespace: neobank-dev
  labels:
    finops.neobank.io/policy: development
spec:
  hard:
    requests.cpu: "4"
    requests.memory: 8Gi
    limits.cpu: "8"
    limits.memory: 16Gi
    pods: "30"
    persistentvolumeclaims: "5"
    services.loadbalancers: "0"
